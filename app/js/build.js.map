{"version":3,"sources":["app.js"],"names":["VK","init","apiId","users","window","addEventListener","event","Promise","resolve","reject","Auth","login","response","session","console","log","then","api","fields","name_case","answer","createUserBlock","firstFriendInput","document","querySelector","searchFriend","value","newArrayOfUsers","filterUsers","toLowerCase","usersBlock","docFragment","createDocumentFragment","forEach","user","index","div","createElement","id","classList","add","draggable","setAttribute","photo","currentTarget","style","background","firstName","innerHTML","secondName","userInfo","photo_100","first_name","last_name","dataTransfer","setData","JSON","stringify","getData","appendChild","array","filteredArray","indexOf","push","friendsInList","preventDefault"],"mappings":"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","file":"build.js","sourcesContent":["\"use strict\";\n\nVK.init({\n  apiId: 5629026\n});\n\n\n//глобальный массив всех юзеров\nlet users;\n\nwindow.addEventListener(\"DOMContentLoaded\", (event) => {\n  return new Promise((resolve, reject) => {\n    VK.Auth.login(function(response) {\n      if(response.session) {\n        console.log(response);\n        resolve();\n      } else {\n        console.log(response);\n        reject();\n      }\n    }, 2 | 4)\n  }).then(() => {\n    return new Promise((resolve, reject) => {\n      VK.api('friends.get', {fields: 'photo_100', name_case: 'nom'}, function(answer) {\n        resolve(answer.response);\n        console.log(answer);\n      });\n    });\n  }).then((answer) => {\n    if(answer) {\n      window.users = answer;\n      console.log(users);\n      createUserBlock(answer);\n\n      var firstFriendInput = document.querySelector(\".firstFriendInput\");\n      firstFriendInput.addEventListener('keyup', (event) => {\n        var searchFriend = firstFriendInput.value;\n        var newArrayOfUsers = filterUsers(users, searchFriend.toLowerCase());\n\n        createUserBlock(newArrayOfUsers);\n      });\n    }\n  });\n\n  function createUserBlock(users) {\n    var usersBlock = document.querySelector('.filter-app-friends-your');\n    //usersBlock.innerHTML = \"\";\n\n    var docFragment = document.createDocumentFragment();\n\n    users.forEach((user, index) => {\n      let div = document.createElement('div');\n      div.id = index;\n      div.classList.add('item');\n\n      if(!div.draggable) {\n        div.setAttribute(\"draggable\", \"true\");\n\n        div.addEventListener('drag', (event) => {\n          console.log(event);\n          var photo = event.currentTarget.querySelector('.item-logo').style.background;\n          var firstName = event.currentTarget.querySelector('.item-title_firstName').innerHTML;\n          var secondName = event.currentTarget.querySelector('.item-title_secondName').innerHTML;\n          var userInfo = {\n            photo_100: null,\n            first_name: firstName,\n            last_name: secondName\n          };\n\n          event.dataTransfer.setData('text/plain', JSON.stringify(userInfo));\n          console.log(event.dataTransfer.getData(userInfo));\n        })\n      }\n\n      div.innerHTML = `\n                        <div class=\"item-logo\" style=\"background: url(${user.photo_100});\"></div>\n                        <h3 class=\"item-title\">\n                          <span class=\"item-title_firstName\">${user.first_name}</span>\n                          <span class=\"item-title_secondName\">${user.last_name}</span></h3>\n                        <div class=\"close item-close\">\n                          <i class=\"fa fa-plus\" aria-hidden=\"true\"></i>\n                        </div>\n                      `;\n      docFragment.appendChild(div);\n    })\n    usersBlock.appendChild(docFragment);\n  };\n\n  function filterUsers(array, value) {\n    let filteredArray = [];\n\n    array.forEach((user) => {\n      if(user.first_name.toLowerCase().indexOf(value) != -1) {\n        filteredArray.push(user);\n      }\n    });\n\n    return filteredArray;\n  };\n\n  var friendsInList = document.querySelector(\".filter-app-friends-in-list\");\n  friendsInList.addEventListener('drop', (event) => {\n    event.preventDefault();\n\n    console.log(event);\n  });\n});\n"],"sourceRoot":"/source/"}