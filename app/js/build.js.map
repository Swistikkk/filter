{"version":3,"sources":["app.js"],"names":["VK","init","apiId","getFromLocalStorage","key","JSON","parse","localStorage","vkUsers","myFriends","window","addEventListener","searchInputMyFriend","document","querySelector","vkFriendsBlock","myFriendBlock","searchInputVkFriends","saveButton","Promise","resolve","reject","Auth","login","response","status","console","log","then","api","fields","order","name_case","answer","initFilterApp","event","actionOnClick","inputValue","currentTarget","value","searchArrayOfUsers","filter","user","first_name","includes","renderUsers","preventDefault","data","dataTransfer","getData","removeChild","getElementById","setMyFriends","setVkUsers","setItem","stringify","arrayOfUsers","blockToAppend","action","innerHTML","forEach","userItem","createElement","innerNodes","photo_100","last_name","setAttribute","classList","add","user_id","concat","setData","target","dataset","id","appendChild","push","unshift","nameOfArray","contains","idUser","parentElement"],"mappings":"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","file":"build.js","sourcesContent":["VK.init({\n  apiId: 5629026,\n});\n\nfunction getFromLocalStorage(key) {\n  return JSON.parse(localStorage[key] || null);\n};\n\nlet vkUsers = getFromLocalStorage('vkUsers') || null;\nlet myFriends = getFromLocalStorage('myFriends') || [];\n\nwindow.addEventListener('load', () => {\n  let searchInputMyFriend = document.querySelector('.filter-app-search-input__myFriends input');\n  let vkFriendsBlock = document.querySelector('.filter-app-friends-your__wrapper');\n  let myFriendBlock = document.querySelector('.filter-app-friends-in-list__wrapper');\n  let searchInputVkFriends = document.querySelector('.filter-app-search-input input');\n  let saveButton = document.querySelector('.filter-app-footer button');\n\n  if(!vkUsers) {\n    new Promise((resolve, reject) => {\n      VK.Auth.login(function(response){\n        if(response.status == 'connected') {\n          resolve();\n        } else {\n          console.log(response);\n        }\n      }, 2 | 4);\n    }).then(()=> {\n      return new Promise((resolve) => {\n        VK.api('friends.get',{fields: 'photo_100', order: 'name', name_case: 'nom'}, (answer) => {\n          if(answer.response) {\n            vkUsers = answer.response;\n            console.log(vkUsers);\n            resolve();\n          }\n        });\n      })\n    }).then(() => {\n      initFilterApp(vkFriendsBlock, myFriendBlock);\n    })\n  } else {\n    initFilterApp(vkFriendsBlock, myFriendBlock);\n  }\n\n\n  vkFriendsBlock.addEventListener('click', (event) => {\n    actionOnClick(event, 'vk', vkFriendsBlock, myFriendBlock);\n  });\n\n  myFriendBlock.addEventListener('click', (event) => {\n    actionOnClick(event, 'myFriend', vkFriendsBlock, myFriendBlock);\n  });\n\n\n  searchInputVkFriends.addEventListener('keyup', (event) => {\n    let inputValue = event.currentTarget.value;\n    let searchArrayOfUsers = vkUsers.filter((user) => {\n      return user.first_name.includes(inputValue) == true;\n    });\n\n    renderUsers(searchArrayOfUsers, vkFriendsBlock);\n  });\n\n  searchInputMyFriend.addEventListener('keyup', (event) => {\n    let inputValue = event.currentTarget.value;\n    let searchArrayOfUsers = myFriends.filter((user) => {\n      return user.first_name.includes(inputValue) == true;\n    });\n\n    renderUsers(searchArrayOfUsers, myFriendBlock, 'remove');\n  });\n\n\n  // Drag & Drop HTML5 Api\n  vkFriendsBlock.addEventListener('dragover', (event) => {\n    event.preventDefault();\n  });\n\n  vkFriendsBlock.addEventListener('drop', (event) => {\n    event.preventDefault();\n\n    var data = event.dataTransfer.getData(\"userItem\");\n    myFriendBlock.removeChild(document.getElementById(data));\n\n    setMyFriends(data);\n    renderUsers(vkUsers, vkFriendsBlock);\n  });\n\n  myFriendBlock.addEventListener('dragover', (event) => {\n    event.preventDefault();\n  });\n\n  myFriendBlock.addEventListener('drop', (event) => {\n    event.preventDefault();\n\n    var data = event.dataTransfer.getData(\"userItem\");\n    vkFriendsBlock.removeChild(document.getElementById(data));\n\n    setVkUsers(data);\n    renderUsers(myFriends, myFriendBlock, 'remove');\n  });\n\n  // Save button to localStorage\n  saveButton.addEventListener('click', (event) => {\n    localStorage.setItem('vkUsers', JSON.stringify(vkUsers));\n    localStorage.setItem('myFriends', JSON.stringify(myFriends));\n  });\n});\n\n\nfunction initFilterApp(vkFriendsBlock, myFriendBlock,) {\n  renderUsers(vkUsers, vkFriendsBlock);\n  renderUsers(myFriends, myFriendBlock, 'remove');\n}\n\nfunction renderUsers(arrayOfUsers, blockToAppend, action) {\n  blockToAppend.innerHTML = '';\n\n  arrayOfUsers.forEach((user) => {\n    let userItem = document.createElement('div');\n    let innerNodes = `<div class=\"item-logo\" style=\"background: url(${user.photo_100}); background-size: contain; \"></div>\n                      <h3 class=\"item-title\">${user.first_name} ${user.last_name}</h3>`;\n\n    userItem.setAttribute('draggable', true);\n    userItem.classList.add('item');\n    userItem.setAttribute('data-id', user.user_id);\n    userItem.setAttribute('id', user.user_id);\n\n    if(action == 'remove') {\n      innerNodes = innerNodes.concat(`\n        <div class=\"close item-close\">\n           <i class=\"fa fa-times\" aria-hidden=\"true\"></i>\n        </div>\n      `);\n    } else {\n      innerNodes = innerNodes.concat(`\n        <div class=\"close item-close\">\n           <i class=\"fa fa-plus\" aria-hidden=\"true\"></i>\n        </div>\n      `);\n    };\n\n    userItem.innerHTML = innerNodes;\n\n    userItem.addEventListener('dragstart', (event) => {\n      event.dataTransfer.setData(\"userItem\", event.target.dataset.id);\n    });\n\n    blockToAppend.appendChild(userItem);\n  });\n};\n\nfunction setVkUsers(id) {\n  vkUsers = vkUsers.filter((user) => {\n    if(user.user_id == id) {\n      myFriends.push(user);\n    }\n\n    return user.user_id != id\n  });\n};\n\nfunction setMyFriends(id) {\n  myFriends = myFriends.filter((user) => {\n    if(user.user_id == id) {\n      vkUsers.unshift(user);\n    }\n\n    return user.user_id != id;\n  });\n};\n\nfunction actionOnClick(event, nameOfArray, vkFriendsBlock, myFriendBlock) {\n  if(event.target.classList.contains('item-close') || event.target.classList.contains('fa-times') || event.target.classList.contains('fa-plus')) {\n    console.log('enter in if');\n    let idUser = event.target.parentElement.parentElement.dataset.id;\n\n    if(nameOfArray == 'vk') {\n      setVkUsers(idUser);\n    } else {\n      setMyFriends(idUser);\n    }\n\n    renderUsers(vkUsers, vkFriendsBlock);\n    renderUsers(myFriends, myFriendBlock, 'remove');\n  }\n}\n\n\n"]}