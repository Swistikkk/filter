{"version":3,"sources":["app.js"],"names":["VK","init","apiId","Promise","resolve","reject","Auth","login","response","status","console","log","then","api","fields","order","name_case","answer","usersVk","vkUsers","getFromLocalStorage","myFriends","searchInputMyFriend","document","querySelector","vkFriendsBlock","myFriendBlock","searchInputVkFriends","saveButton","key","localStorage","JSON","parse","renderUsers","arrayOfUsers","blockToAppend","action","innerHTML","forEach","user","userItem","createElement","setAttribute","classList","add","user_id","photo_100","first_name","last_name","addEventListener","event","dataTransfer","setData","target","dataset","id","appendChild","inputValue","currentTarget","value","searchArrayOfUsers","filter","indexOf","contains","idUser","parentElement","setVkUsers","setMyFriends","push","unshift","preventDefault","data","getData","removeChild","getElementById","setItem","stringify"],"mappings":"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","file":"build.js","sourcesContent":["VK.init({\n  apiId: 5629026,\n});\n\nnew Promise((resolve, reject) => {\n  VK.Auth.login(function(response){\n    if(response.status == 'connected') {\n      resolve();\n    } else {\n      console.log(response);\n    }\n  }, 2 | 4);\n}).then(()=> {\n  return new Promise((resolve) => {\n    VK.api('friends.get',{fields: 'photo_100', order: 'name', name_case: 'nom'}, (answer) => {\n      if(answer.response) {\n        resolve(answer.response);\n      }\n    });\n  })\n}).then((usersVk) => {\n  let vkUsers = getFromLocalStorage('vkUsers') || usersVk;\n  let myFriends = getFromLocalStorage('myFriends') || [];\n  let searchInputMyFriend = document.querySelector('.filter-app-search-input__myFriends input');\n  let vkFriendsBlock = document.querySelector('.filter-app-friends-your__wrapper');\n  let myFriendBlock = document.querySelector('.filter-app-friends-in-list__wrapper');\n  let searchInputVkFriends = document.querySelector('.filter-app-search-input input');\n  let saveButton = document.querySelector('.filter-app-footer button');\n\n  function getFromLocalStorage(key) {\n    if(localStorage[key]) {\n      return JSON.parse(localStorage[key]);\n    }\n\n    return false;\n  };\n\n  function renderUsers(arrayOfUsers, blockToAppend, action) {\n    blockToAppend.innerHTML = '';\n\n    arrayOfUsers.forEach((user) => {\n      let userItem = document.createElement('div');\n\n      userItem.setAttribute('draggable', true);\n      userItem.classList.add('item');\n      userItem.setAttribute('data-id', user.user_id);\n      userItem.setAttribute('id', user.user_id);\n\n      if(action == 'remove') {\n        userItem.innerHTML = `\n        <div class=\"item-logo\" style=\"background: url(${user.photo_100}); background-size: contain; \"></div>\n        <h3 class=\"item-title\">${user.first_name} ${user.last_name}</h3>\n        <div class=\"close item-close\">\n          <i class=\"fa fa-times\" aria-hidden=\"true\"></i>\n        </div>`;\n      } else {\n        userItem.innerHTML = `\n        <div class=\"item-logo\" style=\"background: url(${user.photo_100}); background-size: contain; \"></div>\n        <h3 class=\"item-title\">${user.first_name} ${user.last_name}</h3>\n        <div class=\"close item-close\">\n          <i class=\"fa fa-plus\" aria-hidden=\"true\"></i>\n        </div>`;\n      }\n\n      userItem.addEventListener('dragstart', (event) => {\n        event.dataTransfer.setData(\"userItem\", event.target.dataset.id);\n      });\n\n      blockToAppend.appendChild(userItem);\n    });\n  }\n\n  renderUsers(vkUsers, vkFriendsBlock);\n  renderUsers(myFriends, myFriendBlock, 'remove');\n\n  searchInputVkFriends.addEventListener('keyup', (event) => {\n    let inputValue = event.currentTarget.value;\n    let searchArrayOfUsers = vkUsers.filter((user) => {\n      if(user.first_name.indexOf(inputValue) != -1) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n\n    renderUsers(searchArrayOfUsers, vkFriendsBlock);\n  });\n\n  searchInputMyFriend.addEventListener('keyup', (event) => {\n    let inputValue = event.currentTarget.value;\n    let searchArrayOfUsers = myFriends.filter((user) => {\n      if(user.first_name.indexOf(inputValue) != -1) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n\n    renderUsers(searchArrayOfUsers, myFriendBlock, 'remove');\n  });\n\n  vkFriendsBlock.addEventListener('click', (event) => {\n    if(event.target.classList.contains('item-close') || event.target.classList.contains('fa-plus')) {\n      // ToDO Сделать проверку если это крести и если это блок крестика\n      let idUser = event.target.parentElement.parentElement.dataset.id;\n\n      setVkUsers(idUser);\n\n      renderUsers(vkUsers, vkFriendsBlock);\n      renderUsers(myFriends, myFriendBlock, 'remove');\n    }\n  });\n\n  myFriendBlock.addEventListener('click', (event) => {\n    if(event.target.classList.contains('item-close') || event.target.classList.contains('fa-times')) {\n      // ToDO Сделать проверку если это крести и если это блок крестика\n      let idUser = event.target.parentElement.parentElement.dataset.id;\n\n      setMyFriends(idUser);\n      renderUsers(vkUsers, vkFriendsBlock);\n      renderUsers(myFriends, myFriendBlock, 'remove');\n    }\n  });\n\n  function setVkUsers(id) {\n    vkUsers = vkUsers.filter((user) => {\n      if(user.user_id == id) {\n        myFriends.push(user);\n      }\n\n      if(user.user_id != id) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n  }\n\n  function setMyFriends(id) {\n    myFriends = myFriends.filter((user) => {\n      if(user.user_id == id) {\n        vkUsers.unshift(user);\n      }\n\n      if(user.user_id !=id) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n\n  }\n\n\n\n\n\n  // Drop to vkFriendBlock\n\n  vkFriendsBlock.addEventListener('dragover', (event) => {\n    event.preventDefault();\n  });\n\n  vkFriendsBlock.addEventListener('drop', (event) => {\n    event.preventDefault();\n\n    var data = event.dataTransfer.getData(\"userItem\");\n    myFriendBlock.removeChild(document.getElementById(data));\n\n    setMyFriends(data);\n    renderUsers(vkUsers, vkFriendsBlock);\n  });\n\n\n\n\n\n\n  // Drop to myFriendsBlock\n\n  myFriendBlock.addEventListener('dragover', (event) => {\n    event.preventDefault();\n  });\n\n  myFriendBlock.addEventListener('drop', (event) => {\n    event.preventDefault();\n\n    var data = event.dataTransfer.getData(\"userItem\");\n    vkFriendsBlock.removeChild(document.getElementById(data));\n\n    setVkUsers(data);\n    renderUsers(myFriends, myFriendBlock, 'remove');\n  })\n\n\n  saveButton.addEventListener('click', (event) => {\n    localStorage.setItem('vkUsers', JSON.stringify(vkUsers));\n    localStorage.setItem('myFriends', JSON.stringify(myFriends));\n  });\n});\n\n"]}